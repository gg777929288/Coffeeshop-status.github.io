<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coffee Shop æ–‡å­—é »é“çµ±è¨ˆ</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .chart-container {
            min-height: 100px;
            height: 500px;
            width: 100%;
        }
        .description {
            margin: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 5px;
            line-height: 1.6;
        }
        .table-container {
            margin: 20px;
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        .pagination {
            margin: 20px;
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        .pagination button {
            padding: 5px 10px;
            cursor: pointer;
        }
        .date-filter {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="description">
            <h2>æ–‡å­—é »é“ä½¿ç”¨çµ±è¨ˆ</h2>
            <p>çµ±è¨ˆåŒ…å«ï¼šé »é“é–±è®€äººæ•¸ã€ç™¼è¨€äººæ•¸ã€è¨Šæ¯æ•¸é‡</p>
            <p style="color: #666; font-style: italic;">è¨»ï¼šä»¥ä¸‹åœ–è¡¨æ•¸æ“šç‚ºéå»28å¤©çš„çµ±è¨ˆè³‡æ–™ï¼Œä¸å—æ—¥æœŸç¯„åœæˆ–æ™‚é–“é–“éš”çš„å½±éŸ¿ã€‚</p>
        </div>

        <div class="chart-container">
            <canvas id="channelChart"></canvas>
        </div>

        <div class="table-container">
            <table id="dataTable">
                <thead>
                    <tr>
                        <th>é »é“åç¨±</th>
                        <th>é–±è®€äººæ•¸</th>
                        <th>ç™¼è¨€äººæ•¸</th>
                        <th>è¨Šæ¯æ•¸é‡</th>
                    </tr>
                </thead>
                <tbody id="tableBody"></tbody>
            </table>
            <div class="pagination" id="pagination"></div>
        </div>
    </div>

    <script>
        let currentPage = 1;
        const ITEMS_PER_PAGE = 10;
        let chart = null;

        const channelData = [
            {
            name: "ğŸ’å®¢æœé »é“ğŸ’",
            id: "1014829804119412756",
            readers: 7,
            chatters: 0,
            messages: 0
            },
            {
            name: "éŠæˆ²è«–å£‡",
            id: "1019742579719413793",
            readers: 108,
            chatters: 1,
            messages: 1
            },
            {
            name: "ğŸ’­èŠå¤©äºŒè™Ÿå»³ğŸ’­",
            id: "1047155327956697178",
            readers: 56,
            chatters: 0,
            messages: 0
            },
            {
            name: "ç”Ÿæ´»è«–å£‡",
            id: "1047766053817683998",
            readers: 46,
            chatters: 3,
            messages: 4
            },
            {
            name: "åœ–ç‰‡é »é“",
            id: "1050246934356557984",
            readers: 108,
            chatters: 5,
            messages: 8
            },
            {
            name: "â†‘å‡ç´šâ†‘",
            id: "1087339015486836806",
            readers: 21,
            chatters: 0,
            messages: 0
            },
            {
            name: "ç›´æ’­é–“",
            id: "1099253937313431672",
            readers: 11,
            chatters: 0,
            messages: 0
            },
            {
            name: "æªåœ˜é€šçŸ¥",
            id: "1109105299413012490",
            readers: 221,
            chatters: 8,
            messages: 50
            },
            {
            name: "åˆä½œ",
            id: "1111842501318422570",
            readers: 114,
            chatters: 4,
            messages: 9
            },
            {
            name: "è‡ªæˆ‘ä»‹ç´¹å€",
            id: "1112310110535041024",
            readers: 241,
            chatters: 20,
            messages: 77
            },
            {
            name: "å—è‡ºç¤¾ç¾¤è«–å£‡",
            id: "1151385789050134569",
            readers: 130,
            chatters: 2,
            messages: 9
            },
            {
            name: "å‹•æ¼«è«–å£‡",
            id: "1152159037631250432",
            readers: 47,
            chatters: 0,
            messages: 0
            },
            {
            name: "ç¥¨å£ç´€éŒ„",
            id: "1163413770954084352",
            readers: 4,
            chatters: 0,
            messages: 0
            },
            {
            name: "å­¸ç”Ÿäº¤æµå®¤",
            id: "1186556541889957928",
            readers: 248,
            chatters: 43,
            messages: 1347
            },
            {
            name: "æ™®é€šèªéŸ³é »é“",
            id: "1283293086956392512",
            readers: 56,
            chatters: 10,
            messages: 16
            },
            {
            name: "å­¸æ ¡é »é“å°ˆç”¨å…¬å‘Š",
            id: "1285059371818291222",
            readers: 140,
            chatters: 1,
            messages: 1
            },
            {
            name: "",
            id: "1291049446393511946",
            readers: 2,
            chatters: 0,
            messages: 0
            },
            {
            name: "",
            id: "1291500265668743179",
            readers: 3,
            chatters: 2,
            messages: 9
            },
            {
            name: "",
            id: "1305523686329159720",
            readers: 6,
            chatters: 2,
            messages: 19
            },
            {
            name: "ticket-0132",
            id: "1305566651823165552",
            readers: 5,
            chatters: 1,
            messages: 62
            },
            {
            name: "",
            id: "1305941571417407549",
            readers: 4,
            chatters: 2,
            messages: 13
            },
            {
            name: "",
            id: "1307153479520751677",
            readers: 3,
            chatters: 3,
            messages: 11
            },
            {
            name: "ticket-0135",
            id: "1307254891881828463",
            readers: 5,
            chatters: 2,
            messages: 29
            },
            {
            name: "ticket-0137",
            id: "1308289296612200491",
            readers: 6,
            chatters: 3,
            messages: 34
            },
            {
            name: "ğŸ›‚æˆ‘é€²ä¾†å•¦ï¼æˆ‘åˆå‡ºå»å•¦ğŸ›‚",
            id: "630009554985287680",
            readers: 23,
            chatters: 0,
            messages: 0
            },
            {
            name: "ğŸ’­èŠå¤©å¤§å»³ğŸ’­",
            id: "630009594760134676",
            readers: 388,
            chatters: 115,
            messages: 2918
            },
            {
            name: "ğŸ—’æœ¬ç¾¤è¦å‰‡åŠé ˆçŸ¥ğŸ—’",
            id: "741621751183835216",
            readers: 6,
            chatters: 0,
            messages: 0
            },
            {
            name: "æ©Ÿå™¨äººç´€éŒ„",
            id: "781560268860948532",
            readers: 3,
            chatters: 0,
            messages: 0
            },
            {
            name: "ğŸ”ã„Ÿé»‘ğŸ”",
            id: "782586067043352576",
            readers: 265,
            chatters: 20,
            messages: 383
            },
            {
            name: "âš ç³»çµ±åŠæ‡²è™•é€šçŸ¥âš ",
            id: "825293220401381407",
            readers: 38,
            chatters: 1,
            messages: 1
            },
            {
            name: "ç®¡ç†å“¡æŒ‡ä»¤é »é“",
            id: "825378617529860166",
            readers: 1,
            chatters: 0,
            messages: 0
            },
            {
            name: "é«˜å±¤äººå“¡æºé€šé »é“",
            id: "833243738687930379",
            readers: 5,
            chatters: 3,
            messages: 6
            },
            {
            name: "æ¡ˆä»¶è³‡æ–™åº«",
            id: "834487721619357726",
            readers: 1,
            chatters: 1,
            messages: 1
            },
            {
            name: "ğŸ“£å…¬å‘ŠğŸ“£",
            id: "834770383323791420",
            readers: 502,
            chatters: 1,
            messages: 13
            },
            {
            name: "ğŸ“£åˆä½œç¾¤ã®å…¬å‘ŠğŸ“£",
            id: "836656657680695306",
            readers: 4,
            chatters: 0,
            messages: 0
            },
            {
            name: "ğŸ‘‰æœ¬ç¾¤çš„é‚€è«‹ğŸ‘ˆ",
            id: "846017816574033920",
            readers: 2,
            chatters: 0,
            messages: 0
            },
            {
            name: "ğŸ›’ä»£è³¼ğŸ›’",
            id: "914394712423673927",
            readers: 5,
            chatters: 0,
            messages: 0
            },
            {
            name: "ğŸ¤–æ©Ÿå™¨äººæŒ‡ä»¤ğŸ¤–",
            id: "921543952631484517",
            readers: 18,
            chatters: 5,
            messages: 72
            },
            {
            name: "ğŸ‘­å’–å•¡å»³å°å¤–è•‰æµå»³ğŸ‘­",
            id: "929674706968268810",
            readers: 95,
            chatters: 2,
            messages: 7
            }
        ];

        function loadData() {
            // Only create chart if it doesn't exist
            if (!chart) {
                createChart(channelData);
            }
            updateTable(channelData);
        }

        function createChart(data) {
            const ctx = document.getElementById('channelChart').getContext('2d');
            const top10Data = data
                .filter(d => d.name) // Filter out channels with empty names
                .sort((a, b) => b.readers - a.readers)
                .slice(0, 10);

            chart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: top10Data.map(d => d.name),
                    datasets: [{
                        label: 'é–±è®€äººæ•¸',
                        data: top10Data.map(d => d.readers),
                        backgroundColor: 'rgba(75, 192, 192, 0.5)'
                    }, {
                        label: 'ç™¼è¨€äººæ•¸',
                        data: top10Data.map(d => d.chatters),
                        backgroundColor: 'rgba(255, 99, 132, 0.5)'
                    }, {
                        label: 'è¨Šæ¯æ•¸é‡',
                        data: top10Data.map(d => d.messages),
                        backgroundColor: 'rgba(54, 162, 235, 0.5)'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            ticks: {
                                maxRotation: 45,
                                minRotation: 45
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'å‰10åæœ€æ´»èºæ–‡å­—é »é“çµ±è¨ˆ',
                            font: { size: 16, weight: 'bold' }
                        }
                    }
                }
            });
        }

        function updateTable(data) {
            const filteredData = data.filter(d => d.name); // Only show channels with names
            const startIndex = (currentPage - 1) * ITEMS_PER_PAGE;
            const endIndex = startIndex + ITEMS_PER_PAGE;
            const pageData = filteredData.slice(startIndex, endIndex);
            
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';
            
            pageData.forEach(item => {
                const row = tbody.insertRow();
                row.insertCell(0).textContent = item.name;
                row.insertCell(1).textContent = item.readers;
                row.insertCell(2).textContent = item.chatters;
                row.insertCell(3).textContent = item.messages;
            });

            updatePagination(filteredData.length);
        }

        function updatePagination(totalItems) {
            const totalPages = Math.ceil(totalItems / ITEMS_PER_PAGE);
            const pagination = document.getElementById('pagination');
            pagination.innerHTML = '';

            // Add previous page button
            if (currentPage > 1) {
                const prevButton = document.createElement('button');
                prevButton.textContent = 'â†';
                prevButton.addEventListener('click', () => {
                    currentPage--;
                    loadData();
                });
                pagination.appendChild(prevButton);
            }

            // Add page numbers
            for (let i = 1; i <= totalPages; i++) {
                const button = document.createElement('button');
                button.textContent = i;
                button.addEventListener('click', () => {
                    currentPage = i;
                    loadData();
                });
                if (i === currentPage) {
                    button.style.backgroundColor = '#007bff';
                    button.style.color = 'white';
                }
                pagination.appendChild(button);
            }

            // Add next page button
            if (currentPage < totalPages) {
                const nextButton = document.createElement('button');
                nextButton.textContent = 'â†’';
                nextButton.addEventListener('click', () => {
                    currentPage++;
                    loadData();
                });
                pagination.appendChild(nextButton);
            }
        }

        window.addEventListener('load', loadData);
    </script>
</body>
</html>